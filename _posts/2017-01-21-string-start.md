---
layout: post
title:  "스프링은 뭐지?"
date:   2017-01-21
desc: "spring"
keywords: "nhnent,spring,blog,회사,신입"
categories: [Spring]
tags: [Spring]
icon: icon-html
---

스프링을 배워야겠다 생각만하고 압도적인 책두께에 짓눌려 미루고 미루다 결국 입사하고 공부하게 되네요. 개인적으로 정리도 할겸 스프링에 대해 공부한 내용들을 적어봅니다.


1. 스프링
=============
우선 스프링 프레임워크에 대해 검색을 해보변 위키백과에서는 
> 자바 플랫폼을 위한 오픈소스 애플리케이션 프레임워크로서 간단히 스프링이라고도 불린다.
라고 써있군요. 뭔지 감이 잘안옵니다.
인터넷은 됫고 책이나 펼쳐봅시다.

1-1. 토비의 스프링
---------------
스프링하면 유명한 [토비의 스프링], 책 두께는 엄청나지만 일단은 시작해야죠
1장에는 DAO(Data Access Object)를 만들어 하나하나 개선해가는 방향으로 설명하고 있네요.

우선 클래스하나에 DB연결, SQL, DB연결 자원 반납을 가진 클래스를 만듭니다.
ADD와 GET메소드가 있지만 각자 DB연결, SQL, DB연결 자원 반납을 하는 코드이죠.

물론 이렇게 만들면 같이 일하는 사람이든 가르쳐주는 사람이든 아니면 미래에 자신에게 왜 이렇게 했냐고 혼나겠죠. 이걸 기반으로 하나씩 하나씩 수정해갑니다.
이걸 보면 단순히 스프링 프레임워크만에 대한 것이 아니라 객체지향적인 관점의 생각를 따라 설명해주는 책이네요

### 관심사 분리
관심사 분리하고 하면 뭔가 잘모르겠지만 하나의 공통된 기능단위로 분류하는걸 의미하는 거 같군요.
중복코드를 제거 해야하니.
    1. DB를 연결하는 부분
    2. SQL을 사용하는 부분
    3. DB연결 자원 반납을 하는 부분
로 나눕니다.

DB연결하는 부분은 같은 코드를 쓰니 분리를 할수있군요!
공통의 기능을 담당하는 메소드로 중복된 코드를 뽑아내는 것을 리팩토링에서는 **메소드 추출 기법**이라고 부른답니다.


### 상속
어찌 일단 DB연결하는 부분은 분리를 했는데 이번엔 사용하는 곳에 따라 DB커넥션을 변경할수 있게 해야하네요?

그럼 추상 메소드로 바꾸고 구현을 상속을 받아 구현합니다.
이런 방법을 디자인 패턴에서는 **템플릿 메소드 패턴**이라 하네요

DB커넥션을 변경하면 서브클래스에서 어떤 Connection클래스의 오브젝트를 생성할것인지 방법을 정하게 하니 **펙토리 메소드 패턴**이라고 부르기도 합니다.

으... 뭔가 패턴이 막나오네요. 용어는 어려워도 이해하기는 어렵진 않네요

해결됬다 싶으니 상속을 하면 단점들을 막알려줍니다  ㅡㅡ. 이것도 아니군요
슈퍼클래스에 변경이 있으면 모든 서브클래스를 수정해야한다는지 여러 이슈가 있네요 다음걸 알아봅시다...


### 클래스 분리
이번엔 아예 분리를 합니다!
DB를 연결하는 부분만 클래스를 분리하고 DAO가 가져다 쓰는거죠!

물론 이런 분리작업은 항상 검증을 해야합니다. 기능에 변화가 없다는 걸 말이죠.
테스트를 잊지말고 같은 결과가 나오는걸 확인합시다

음... 이렇게 하니 커넥션을 변경하고 싶은데 상속했던것 처럼 사용이 안되네요 DAO가 독립 시킨 클래스에 종속되어잇다보니 확장해서 사용이 안됩니다.
어찌하나..

### 인터페이스
자바에는 인터페이스가 있습니다. 어떤 일을 하겠다는 기능만 정의해놀은 것이죠
음.. 근대 역시 이방법도 DAO에 인터페이스를 구현한 클래스 명이 있어야하네요..

### 다시 관계설정!
DAO는 수정하고 싶지 않아요! 확장하기 힘드니까요 ㅠㅠ
그럼 DAO의 커넥션을 설정하는 것을 클래스를 사용하는곳에서 파라미터를 전달하여 연결하도록 합시다. 생성자를 쓰는거지요

드디어 DAO는 같은 커넥션 클래스를 쓰면 되는 군요. 바뀌는 커넥션정보는 파라미터로 받으면 되니까요.

### 개방 패쇄 원칙
객체지향 설계 원칙 중의 하나인 개방 패쇄 원칙(OCP)은
> 확장에는 열려있어야하고 변경에는 닫혀 있어야 한다.
를 뜻합니다.
이건 **높은 응집도**와 **낮은 결합도**로도 설명히 가능하죠
응집도가 높다는 것은 하나에 책임에 집중되어 있고 낮은 결합도는 최소한의 연결만 제공하여 한곳에 변화가 있어도 문제가 없다는 것을 의미합니다.

## 스프링은?
엄청 읽고 써내려간거 같은데 스프링 예기는 없고 객체지향적인 설계 방법만 나오는 거 같네요... 뭔가 객체지향적인 사고에 내용에 대해서는 알게 됬지만 스프링은 언제... 다음에 나올것 같으니 여기서 잠시 멈췄다 다음 글로 넘기죠